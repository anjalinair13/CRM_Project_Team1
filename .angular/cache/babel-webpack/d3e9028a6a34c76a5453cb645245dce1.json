{"ast":null,"code":"import { __decorate } from \"tslib\";\nimport { DatePipe } from '@angular/common';\nimport { Component } from '@angular/core';\nimport { User } from 'src/app/shared/user';\nlet UserComponent = class UserComponent {\n  constructor(userService, route, router, toastrService) {\n    this.userService = userService;\n    this.route = route;\n    this.router = router;\n    this.toastrService = toastrService;\n    this.user = new User();\n  }\n\n  ngOnInit() {\n    this.UserId = this.route.snapshot.params['UserId'];\n    this.userService.bindListUsers();\n\n    if (this.UserId != 0 || this.UserId != null) {\n      this.userService.getUser(this.UserId).subscribe(data => {\n        console.log(data);\n        var datePipe = new DatePipe(\"en-UK\");\n        let formatedDate = datePipe.transform(data.EnquiryDate, 'yyyy-MM-dd');\n        data.EnquiryDate = formatedDate;\n        this.userService.formData = Object.assign({}, data);\n      }, error => console.log(error));\n    }\n  }\n\n  onSubmit(form) {\n    console.log(form.value);\n    let addId = this.userService.formData.UserId; //insert\n\n    if (addId == 0 || addId == null) {\n      this.insertUserRecord(form);\n    } else {\n      //update\n      console.log(\"Updating record...\");\n      this.updateUserRecord(form);\n      this.toastrService.success('User record has been updated', 'CRM');\n    }\n  } //clear all contents at initialization\n\n\n  resetForm(form) {\n    if (form != null) {\n      form.resetForm();\n    }\n  } //defining insert record\n\n\n  insertUserRecord(form) {\n    console.log(\"Inserting a record...\");\n    this.userService.insertUser(form.value).subscribe(result => {\n      console.log(result);\n      this.resetForm(form);\n      this.toastrService.success(\"User record has been inserted\", \"CRM\");\n    }); //window.location.reload();\n  } //defining update record\n\n\n  updateUserRecord(form) {\n    this.userService.updateUser(form.value).subscribe(result => {\n      console.log(result);\n      this.resetForm(form);\n      this.toastrService.success(\"User record has been updated\", \"CRM\");\n      this.userService.bindListUsers();\n    }); //window.location.reload();\n  }\n\n};\nUserComponent = __decorate([Component({\n  selector: 'app-user',\n  templateUrl: './user.component.html',\n  styleUrls: ['./user.component.css']\n})], UserComponent);\nexport { UserComponent };","map":null,"metadata":{},"sourceType":"module"}