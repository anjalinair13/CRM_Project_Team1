{"ast":null,"code":"import { __decorate } from \"tslib\";\nimport { Component } from '@angular/core';\nimport { Cenquiry } from 'src/app/shared/cenquiry';\nimport { DatePipe } from '@angular/common';\nlet CenquiryComponent = class CenquiryComponent {\n  constructor(cenquiryService, route, router, corservice, toastrService) {\n    this.cenquiryService = cenquiryService;\n    this.route = route;\n    this.router = router;\n    this.corservice = corservice;\n    this.toastrService = toastrService;\n    this.cenquiry = new Cenquiry();\n  }\n\n  ngOnInit() {\n    this.cenquiryService.bindListCEnquiry();\n    this.CEnquiryId = this.route.snapshot.params['CEnquiryId'];\n    this.resetForm();\n\n    if (this.CEnquiryId != 0 || this.CEnquiryId != null) {\n      console.log(\"in course\", this.CEnquiryId);\n      this.cenquiryService.getCEnquiry(this.CEnquiryId).subscribe(data => {\n        console.log(data);\n        var datePipe = new DatePipe(\"en-UK\");\n        let formatedDate = datePipe.transform(data.EnquiryDate, 'yyyy-MM-dd');\n        data.EnquiryDate = formatedDate;\n        this.cenquiryService.formData = Object.assign({}, data);\n      }, error => console.log(error));\n    }\n  }\n\n  onSubmit(form) {\n    console.log(form.value);\n    let addId = this.cenquiryService.formData.CourseEnquiryId; //insert\n\n    if (addId == 0 || addId == null) {\n      //insert\n      form.setValue({\n        CourseEnquiryId: 0,\n        Description: form.value.Description,\n        EnquiryDate: form.value.EnquiryDate,\n        CourseId: form.value.CourseId,\n        Email: form.value.Email,\n        AdminReply: null,\n        AdminReplyDate: null,\n        IsActive: 0,\n        StatusId: 1,\n        QualficationId: form.value.QualficationId,\n        EnquirerName: form.value.EnquirerName\n      });\n      this.insertCEnquiryRecord(form);\n    }\n    /*\r\n    else {\r\n    //update\r\n    console.log(\"Updating record...\");\r\n    this.updateCEnquiryRecord(form);\r\n    this.toastrService.success('Course Enquiry record has been updated', 'CRM');\r\n        }*/\n\n  } //clear all contents at initialization\n\n\n  resetForm(form) {\n    if (form != null) {\n      form.resetForm();\n    }\n  } //defining insert record\n\n\n  insertCEnquiryRecord(form) {\n    console.log(\"Inserting a record...\");\n    this.cenquiryService.insertCEnquiry(form.value).subscribe(result => {\n      console.log(result);\n      this.resetForm(form);\n      this.toastrService.success(\"Course Enquiry record has been inserted\", \"CRM\");\n    });\n    window.location.reload();\n  }\n\n};\nCenquiryComponent = __decorate([Component({\n  selector: 'app-cenquiry',\n  templateUrl: './cenquiry.component.html',\n  styleUrls: ['./cenquiry.component.css']\n})], CenquiryComponent);\nexport { CenquiryComponent };","map":null,"metadata":{},"sourceType":"module"}